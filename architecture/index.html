
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../building_the_lock/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Architecture Notes: How It All Works - Tartarus Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#architecture-notes-how-it-all-works" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Tartarus Docs" class="md-header__button md-logo" aria-label="Tartarus Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tartarus Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Architecture Notes: How It All Works
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Tartarus Docs" class="md-nav__button md-logo" aria-label="Tartarus Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Tartarus Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tartarus Smart Lock V2 Guides
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Architecture Notes: How It All Works
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Architecture Notes: How It All Works
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cryptography" class="md-nav__link">
    <span class="md-ellipsis">
      Cryptography
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signedmessage" class="md-nav__link">
    <span class="md-ellipsis">
      SignedMessage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SignedMessage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commands-counters-serial-numbers" class="md-nav__link">
    <span class="md-ellipsis">
      Commands, Counters &amp; Serial Numbers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hashing" class="md-nav__link">
    <span class="md-ellipsis">
      Hashing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signature-format" class="md-nav__link">
    <span class="md-ellipsis">
      Signature Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signedevent" class="md-nav__link">
    <span class="md-ellipsis">
      SignedEvent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contract-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Contract structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Contract structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bots-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      Bots &amp; Permissions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lock-startup" class="md-nav__link">
    <span class="md-ellipsis">
      Lock Startup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terms" class="md-nav__link">
    <span class="md-ellipsis">
      Terms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Terms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#locksession" class="md-nav__link">
    <span class="md-ellipsis">
      LockSession
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lockusersession" class="md-nav__link">
    <span class="md-ellipsis">
      LockUserSession
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authorsession" class="md-nav__link">
    <span class="md-ellipsis">
      AuthorSession
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adminsession" class="md-nav__link">
    <span class="md-ellipsis">
      AdminSession
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safetykey" class="md-nav__link">
    <span class="md-ellipsis">
      SafetyKey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../building_the_lock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building the Lock
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../setting_up_the_lock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Initial Setup
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sub_user_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lock User Guide - So You Want Someone To Hold Your Keys
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage_guide_for_authors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Author Guide - So You Want To Hold Some Keys
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cryptography" class="md-nav__link">
    <span class="md-ellipsis">
      Cryptography
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signedmessage" class="md-nav__link">
    <span class="md-ellipsis">
      SignedMessage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SignedMessage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commands-counters-serial-numbers" class="md-nav__link">
    <span class="md-ellipsis">
      Commands, Counters &amp; Serial Numbers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hashing" class="md-nav__link">
    <span class="md-ellipsis">
      Hashing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signature-format" class="md-nav__link">
    <span class="md-ellipsis">
      Signature Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signedevent" class="md-nav__link">
    <span class="md-ellipsis">
      SignedEvent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contract-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Contract structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Contract structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bots-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      Bots &amp; Permissions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lock-startup" class="md-nav__link">
    <span class="md-ellipsis">
      Lock Startup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terms" class="md-nav__link">
    <span class="md-ellipsis">
      Terms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Terms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#locksession" class="md-nav__link">
    <span class="md-ellipsis">
      LockSession
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lockusersession" class="md-nav__link">
    <span class="md-ellipsis">
      LockUserSession
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authorsession" class="md-nav__link">
    <span class="md-ellipsis">
      AuthorSession
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adminsession" class="md-nav__link">
    <span class="md-ellipsis">
      AdminSession
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safetykey" class="md-nav__link">
    <span class="md-ellipsis">
      SafetyKey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="architecture-notes-how-it-all-works">Architecture Notes: How It All Works</h1>
<p>This doc is a continuous work in progress.</p>
<p>This serves as the rough architecture guide for how the whole
thing works if you're curious.</p>
<p>There's essentially three components: the lock, the website <a href="https://tartarus.subjugated.club">Tartarus</a>, and the coordinator(API).</p>
<p>The "center" of the system is the Coordinator. The locks need somewhere to send and receive updates, process commands etc.
When they startup they check their local configuration and go through these steps:</p>
<h2 id="cryptography">Cryptography</h2>
<p>Almost every entity in the system has a public and private keypair.</p>
<p>Going into the details of a asymmetric cryptography is way beyond the scope
of this doc. That being said:</p>
<ul>
<li>All keys use curve <code>secp256r1</code>.</li>
<li>All public keys are represented in compressed form.</li>
<li>All hashes are calculated with <code>sha256</code>.</li>
<li>All signatures are to be in <code>raw</code> format, not <code>DER</code>.</li>
<li>All symmetric cryptography is <code>aes-256-gcm</code>.</li>
<li>All password that need to be verified are stored with <code>Scrypt</code> and params: 16384, 8, 1, 32.</li>
<li>Where <code>HKDF</code> is used, we populate the info field with the task at hand.</li>
<li>All <code>ByteArrays</code> are encoded with Base64 unless they are meant to be in a URL in which case we use URL-safe Base64.</li>
<li>Online keys (<code>SafetyKey</code>) are stored as PKCS8 since they aren't transmitted.</li>
</ul>
<h2 id="signedmessage"><code>SignedMessage</code></h2>
<p>All the commands and contracts are implemented as <code>SignedMessage</code>.
A <code>SignedMessage</code> is a flatbuffer with a signed payload. So when you make
a contract you generate the entire <code>Contract</code> flatbuffer, calculate a hash of the
whole table, sign that, and then attach the signature to the outer-wrapper of the
<code>SignedMessage</code>.</p>
<p>Every entity that receives or forwards a <code>SignedMessage</code> will check the signature
and reject the message if it fails to pass.</p>
<h3 id="commands-counters-serial-numbers">Commands, Counters &amp; Serial Numbers</h3>
<p>All the commands after a <code>Contract</code> is accepted are to include a counter value. In order for a <code>SignedMessage</code> to be valid
the counter value in the message has to be greater than or equal to the current counter in the lock.
This is designed to prevent message replay (Someone trying to use an unlock code twice).</p>
<p>All commands also have to include both their own unique serial number and the serial number
of the contract they are issued under. If the contract serial number in a message doesn't match
the current contract it will be rejected. This prevents one person's messages from being used on
a different lock.</p>
<h3 id="hashing">Hashing</h3>
<p>The hash of a flatbuffer has to also include the vtable of the message.
Because the format essentially uses "pointers" in the format, all of those
pointers also have to be covered- and those are the vtable. You'll see code like this almost anywhere a signature is needed:</p>
<pre><code>builder.Finish(contract_offset)
bytes = builder.Output()

start = bytes[0]
contract_start = bytes[start]
vtable_start = start - contract_start
hash = hashlib.sha256(bytes[vtable_start:]).digest()
signature = signer.sign(hash)contract_start = bytes[start]
vtable_start = start - contract_start
hash = hashlib.sha256(bytes[vtable_start:]).digest()
signature = signer.sign(hash)
</code></pre>
<h3 id="signature-format">Signature Format</h3>
<p>Signatures need to be raw r + s values, not <code>DER</code> encoded.
This was an early design decision to minimize the size of <code>SignedMessage</code> tables
so they would help fit inside scannable QR code blocks. The downside is most
verification libraries like BouncyCastle want signatures in <code>DER</code> format so you'll need to convert them
around.</p>
<h2 id="signedevent"><code>SignedEvent</code></h2>
<p>The lock will generate signed events for both the coordinator and any bots
that are listed on a contract. They are similar in structure to <code>SignedMessage</code>.</p>
<p>The events in the contract lifecycle are:</p>
<ul>
<li><code>Accept</code> - This event is emitted after the contract has been confirmed in the hardware.</li>
<li><code>Lock</code> - The lock was locked via command from the coordinator.</li>
<li><code>Unlock</code> - The lock was unlocked via command.</li>
<li><code>LocalLock</code> - The lock button on the face of the lock was used. Only emits if temporary unlocking is allowed.</li>
<li><code>LocalUnlock</code> - The unlock button on the face of the lock was used. Only emits if temporary unlocking is allowed.</li>
<li><code>Release</code> - The contract was released and confirmed in hardware.</li>
<li><code>Abort</code> - The contract was aborted via a <code>SafetyKey</code>.</li>
</ul>
<h2 id="contract-structure">Contract structure</h2>
<p>Contracts are pretty straight forward:</p>
<pre><code>table Contract {
  serial_number: ushort;
  public_key: [ubyte];
  bots: [Bot];
  terms: string;
  // If true, subject can freely cycle the lock.
  is_temporary_unlock_allowed: bool;
}
</code></pre>
<p>Notes:</p>
<ul>
<li>The serial number is randomly generated by the author.</li>
<li>The <code>public_key</code> is the author's public key. All future commands will need to be signed
by this key.</li>
<li>The <code>bots</code> vector identifies which bots are allowed to participate in this contract.</li>
<li>The <code>terms</code> string is just an unstructured string. It can include whatever you want. None of the core
bits of the system will try and interpret this field.</li>
<li>Lastly, should temporary unlocks be allowed. If this is true the buttons
on the lock face will work, otherwise they won't.</li>
</ul>
<p>In the original design it was </p>
<h3 id="bots-permissions">Bots &amp; Permissions</h3>
<p>Only bots listed on the contract body will be able to receive events.
Events come directly from the lock, not the coordinator.</p>
<p>Additionally, bots have four possible permission settings:</p>
<ul>
<li><code>receive_events</code> - Whether or not <code>SignedEvent</code> messages will be generated at their appropriate point in the lifecycle.
If this is false no events will be sent to the bot.</li>
<li><code>can_unlock</code> - If this is true the bot can sign an <code>UnlockCommand</code> and it will be accepted.</li>
<li><code>can_lock</code> - Same as unlock but for lock.</li>
<li><code>can_release</code> - If this is true the bot can end the contract.</li>
</ul>
<h2 id="lock-startup">Lock Startup</h2>
<p>What happens on lock startup.</p>
<ul>
<li>Send <code>StartedUpdate</code> from the Contract flatbuffers.
If the coordinator has never heard from this lock before it will create a new <code>LockSession</code>.
It also includes the public key material from the lock, whether it started with a contract, and what
the current lock state is.</li>
<li>Receive a <code>CoordinatorConfiguration</code> message potentially updating the lock's local configuration.
Can also be used to set/toggle experimental features in the firmware.</li>
<li>Sends a <code>GetLatestFirmwareRequest</code> that will us what the latest available version via OTA ("Over the air") is.</li>
<li>Receive a <code>FirmwareChallengeRequest</code>. If you have an "official" build of the firmware it will have a key
injected that can prove it's an official firmware. This is pretty much just ceremonial.</li>
</ul>
<p>From there it will publish a <code>PeriodicUpdate</code> once a minute indefinitely.</p>
<h2 id="terms">Terms</h2>
<h3 id="locksession"><code>LockSession</code></h3>
<p>A <code>LockSession</code> uniquely defines a particular Tartarus lock.</p>
<h3 id="lockusersession"><code>LockUserSession</code></h3>
<p>This is an owner of a Tartarus lock logged into the website.
You can simultaneously have a <code>LockUserSession</code> and an <code>AuthorSession</code>.</p>
<h3 id="authorsession"><code>AuthorSession</code></h3>
<p>This is someone logged into the website with a keypair image they generated and is authoring/managing contracts.
You can simultaneously have a <code>LockUserSession</code> and an <code>AuthorSession</code>.</p>
<h3 id="adminsession"><code>AdminSession</code></h3>
<p>Admin users that have special, magical powers.</p>
<h3 id="safetykey"><code>SafetyKey</code></h3>
<p>A set of reserved online keys that can sign <code>Abort</code> messages.
Only <code>AdminSession</code> users can use <code>SafetyKey</code>s. </p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>