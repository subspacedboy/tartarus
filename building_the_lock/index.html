
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Building the Lock - Tartarus Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#building-the-lock" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Tartarus Docs" class="md-header__button md-logo" aria-label="Tartarus Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tartarus Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Building the Lock
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Tartarus Docs" class="md-nav__button md-logo" aria-label="Tartarus Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Tartarus Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tartarus Smart Lock V2 Guides
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Building the Lock
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Building the Lock
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bill-of-materials" class="md-nav__link">
    <span class="md-ellipsis">
      Bill of Materials
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bill of Materials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mandatory-parts" class="md-nav__link">
    <span class="md-ellipsis">
      Mandatory parts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-but-good-to-have" class="md-nav__link">
    <span class="md-ellipsis">
      Optional, but good to have
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tools" class="md-nav__link">
    <span class="md-ellipsis">
      Tools
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3d-files" class="md-nav__link">
    <span class="md-ellipsis">
      3D Files
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bill-of-materials" class="md-nav__link">
    <span class="md-ellipsis">
      Bill of Materials
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bill of Materials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mandatory-parts" class="md-nav__link">
    <span class="md-ellipsis">
      Mandatory parts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-but-good-to-have" class="md-nav__link">
    <span class="md-ellipsis">
      Optional, but good to have
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tools" class="md-nav__link">
    <span class="md-ellipsis">
      Tools
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3d-files" class="md-nav__link">
    <span class="md-ellipsis">
      3D Files
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="building-the-lock">Building the Lock</h1>
<h2 id="bill-of-materials">Bill of Materials</h2>
<p>In order to build the lock you will need:</p>
<h3 id="mandatory-parts">Mandatory parts</h3>
<ul>
<li><a href="https://www.adafruit.com/product/5691">Adafruit ESP32-S3 Reverse TFT Feather - 4MB Flash, 2MB PSRAM, STEMMA QT</a>. If you want an "official" build + badge on the coordinator, you'll need to order one from subjugated.club. Homebrew versions are totally welcome and don't limit your features.</li>
<li><a href="https://www.adafruit.com/product/4399">STEMMA QT / Qwiic JST SH 4-Pin Cable - 50mm Long</a></li>
<li><a href="https://www.adafruit.com/product/5744">Tiny Code Reader from Useful Sensors</a></li>
<li><a href="https://www.adafruit.com/product/169">Micro servo - TowerPro SG92R</a> - You can also use any generic SG90/SG92 form factor servo.</li>
<li><a href="https://www.grainger.com/product/6CE33">7x Socket Head Cap Screw: M2-0.4 Thread Size, 8 mm Lg, Std, Black Oxide, Steel, Class 12.9, 100 PK</a></li>
<li><a href="https://www.grainger.com/product/26KR83">7x Hex Nut: M2-0.40 Thread, 4 mm Hex Wd, 1.6 mm Hex Ht, Steel, Class 8, Zinc Plated, 100 PK</a></li>
<li><a href="https://www.amazon.com/dp/B09FPJM3L9">3x Female-to-male jumper wires</a> - Shorter the better. These are 10cm.</li>
<li>Adhesive. Hot glue if you want some margin of error, superglue if you want a more "secure" experience.</li>
</ul>
<h3 id="optional-but-good-to-have">Optional, but good to have</h3>
<ul>
<li><a href="https://www.loctiteproducts.com/products/central-pdp.html/loctite-threadlocker-blue/SAP_0201OHL029W4.html">Loctite Threadlocker Blue</a> - Makes the lock more tamper resistant.</li>
<li>Tiny cable tie</li>
<li><a href="https://www.amazon.com/dp/B0009OIJMI?th=1">4mm Nut driver</a> - Definitely makes tightening the nuts easier, but far from necessary. Also you probably want a magnetized one, but this is what I have.</li>
</ul>
<h3 id="tools">Tools</h3>
<ul>
<li>Soldering iron</li>
<li>Technical screwdriver (T6 bit)</li>
</ul>
<h2 id="3d-files">3D Files</h2>
<p>You can get the full kit of parts here: <a href="../static/tartarus_parts.3mf">Full kit</a></p>
<p>I personally use Prusa slicer + the Prusa MINI+ for most builds. I use organic supports, 15% infill, and the 0.20mm SPEED profile.
Feel free to adjust as necessary. I recommend printing with PLA.</p>
<h1 id="assembly">Assembly</h1>
<h2 id="step-1-print-the-parts">Step 1: Print the parts</h2>
<ul>
<li>3D printer</li>
<li>Several hours</li>
</ul>
<h2 id="step-2-solder-headers-to-esp32-s3">Step 2: Solder headers to ESP32-S3</h2>
<ul>
<li>ESP32-S3 + included headers</li>
</ul>
<p><img alt="ESP32-S3 with full headers" src="../images/2.png" /></p>
<p><img alt="Break headers off" src="../images/3.png" /></p>
<p><img alt="Break headers off" src="../images/4.png" /></p>
<p><img alt="Break headers off" src="../images/5.png" />``</p>
<p>Use a pair of pliers and break off 3 headers from the full strip that comes with the ESP32-S3.</p>
<p>You'll solder these headers (short-side through top) across 3V3, GND, and A0. See picture.
Also check out the <a href="https://learn.adafruit.com/esp32-s3-reverse-tft-feather/pinouts">pinout guide</a> from Adafruit.</p>
<h2 id="step-3-flash-the-firmware">Step 3: Flash the firmware</h2>
<p><img alt="Flash firmware" src="../images/6.png" />`</p>
<p>Hold down D0 and press Reset. Flash the firmware with <code>espflash flash</code>. Manually reset it once.
You should see the boot screen.</p>
<p>We do this now because we need the firmware to calibrate the servo.</p>
<h2 id="step-4-assemble-servo-bracket">Step 4: Assemble servo bracket</h2>
<ul>
<li>2x 2mm screws</li>
<li>2x hex nuts</li>
<li>1x mounting bracket</li>
<li>1x SG92 servo (with single-ended horn, and small screw that came with it) </li>
</ul>
<p><img alt="Servo bracket" src="../images/1.png" />`</p>
<h2 id="step-5-wire-servo-to-esp32-s3">Step 5: Wire servo to ESP32-S3.</h2>
<ul>
<li>3x jumper wires</li>
</ul>
<p><img alt="Servo wiring with flipped wires" src="../images/7.png" />`</p>
<p>Unfortunately, the board layout is 3V3, GND, A0 and the servo's wiring is GND, 3V3, Signal.
Use the jumper wires to connect the servo the board headers but swap the power and ground.</p>
<p>Connect USB power to the ESP32-S3 and you will probably hear a quick buzz. The servo is now
in the "down" angle position so we can mount the horn.</p>
<h2 id="step-6-mount-the-horn">Step 6: Mount the horn</h2>
<p><img alt="Servo wiring with flipped wires" src="../images/9.png" />`</p>
<p>Mount the horn at 6 as if it were a clock. Connect power back to the ESP32-S3 and make sure the
servo starts at 6. Toggle the lock on the second screen (D2 to change screen and then by pressing D1, the middle button). It should freely rotate
to a 3 o'clock position and back. If it does, use the small-sized screw and mount the horn permanently. Try
not to rotate the horn while tightening.</p>
<h2 id="step-7-mount-esp32-s3-to-lid">Step 7: Mount ESP32-S3 to lid</h2>
<ul>
<li>4x bolts</li>
<li>4x nuts</li>
</ul>
<p><img alt="3D printed lid backside" src="../images/11.png" />`</p>
<p><img alt="3D printed lib with header clearance popped out" src="../images/12.png" />`</p>
<p><img alt="3D printed lib with header clearance popped out" src="../images/13.png" />`</p>
<p><img alt="3D printed lib with header clearance popped out" src="../images/14.png" />`</p>
<p>Use a pair of tweezers (or similar) to remove the small section where the headers will fit
from the underside of the 3D print.</p>
<p>Attach all the bolts and nuts. Use the thread locker to make sure
they don't loosen. Also makes sure that subs can't just open it by shaking :-).</p>
<h2 id="step-8-wire-and-mount-code-reader">Step 8: Wire and mount code reader</h2>
<ul>
<li>Tiny code reader</li>
<li>Stemma QT cable</li>
<li>1 bolt</li>
<li>1 nut</li>
<li>2 spacers from 3D print</li>
</ul>
<p><img alt="Tiny code reader and associated parts" src="../images/16.png" />`</p>
<p><img alt="Tiny code reader and associated parts" src="../images/17.png" />`</p>
<p><img alt="Tiny code reader and associated parts with spacers glued down" src="../images/18.png" />`</p>
<p>Connect the tiny code reader with the stemma QT cable to the main board.</p>
<p>Mount the tiny code reader with the bolt + nut.</p>
<p>I use 2 "spacers" to secure the code reader in place because it only has the one
screw mount hole. I use a <em>tiny</em> amount of activator on the board and superglue
the spacers above and below the reader. See pic.</p>
<h2 id="step-9-test-and-then-make-wire-connections-permanent">Step 9: Test and then make wire connections permanent</h2>
<p>Plug it in and cycle the lock. Try and scan a wifi code and make sure it connects.
When you're satisfied it's all working make the connections permanent with your
adhesive of choice.</p>
<h2 id="step-10-mount-servo-to-main-body">Step 10: Mount servo to main body</h2>
<p><img alt="Servo mounted to main body" src="../images/19.png" />`</p>
<h2 id="step-11-mount-technical-lid-to-main-body">Step 11: Mount technical lid to main body</h2>
<p><img alt="Servo mounted to main body" src="../images/20.png" />`</p>
<p>I use a tiny cable tie to make this a little easier and a little more organized.</p>
<p>Use your adhesive to secure the front lid to the body.</p>
<p><img alt="Servo mounted to main body" src="../images/21.png" />`</p>
<h2 id="step-12-seal-top">Step 12: Seal top</h2>
<p><img alt="Servo mounted to main body" src="../images/22.png" />`</p>
<p><img alt="Servo mounted to main body" src="../images/23.png" />`</p>
<p>I use superglue on the left sill, the right sill, and a tiny bit across
the front where all the technical parts are mounted.
If you're using hot glue be sure wherever you apply it doesn't interfere with the tray sliding in and out.</p>
<p>In order to get the best seal I recommend leaving a heavy weight on it while it cures.
I have a tupperware full of change for this. Give it an hour or two.</p>
<h2 id="done">Done!</h2>
<p><img alt="Servo mounted to main body" src="../images/24.png" />`</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>