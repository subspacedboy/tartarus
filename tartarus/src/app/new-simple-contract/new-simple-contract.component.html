<h2>Simple Contract Builder</h2>
<div>
  <button (click)="createContract()">Create Contract</button>
</div>

<div #hiddenDiv hidden>
  <h1 style="color: black">Contract</h1>
  <canvas #canvas></canvas>
</div>

<form [formGroup]="contractForm" (ngSubmit)="submit()">
  <fieldset formGroupName="end_condition">
    <label>End Condition Type:</label>
    <select formControlName="type">
      <option value="TimeEndCondition">Time End Condition</option>
      <option value="WhenISaySo">When I Say So</option>
    </select>

    <div formGroupName="value" *ngIf="contractForm.get('end_condition.type')?.value === 'TimeEndCondition'">
      <label>Seconds:</label>
      <input formControlName="seconds" type="number" />
    </div>
  </fieldset>

  <div formArrayName="webhooks">
    <label>Webhooks:</label>
    <div *ngFor="let webhook of webhooks.controls; let i = index" [formGroupName]="i">
      <input formControlName="address" type="text" />
      <button type="button" (click)="removeWebhook(i)">Remove</button>
    </div>
    <button type="button" (click)="addWebhook()">Add Webhook</button>
  </div>

  <label>
    <input type="checkbox" formControlName="is_temporary_unlock_allowed" />
    Temporary Unlock Allowed
  </label>

  <fieldset formGroupName="unlock_rules">
    <label>Max Unlocks:</label>
    <input formControlName="max_unlocks" type="number" />

    <label>Time Limit:</label>
    <input formControlName="time_limit" type="number" />
  </fieldset>

  <button type="submit">Submit</button>
</form>
